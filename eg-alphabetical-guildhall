// ==UserScript==
// @name         Alphabetische Gildenhalle
// @version      0.1 
// @description  Sortiert die Gilden in der Gildenhalle alphabetisch und nicht nach guild_id.
// @author       mofte
// @match        https://evergore.de/*?page=guildhall
// ==/UserScript==

(function() {
    'use strict';

    // Funktion, um die Tabelle alphabetisch nach der ersten Spalte zu sortieren
    function sortGuildTable() {
        const table = document.querySelectorAll('table')[2];  // 3. Tabelle (Index 2)
        if (!table) return;

        const rows = Array.from(table.querySelectorAll('tbody tr'));  // Alle Zeilen in der Tabelle
        if (rows.length <= 1) return; // Wenn es nur eine Zeile oder keine Zeilen gibt, nichts tun

        // Entferne die Kopfzeile, um sie später wieder hinzuzufügen
        const headerRow = rows.shift();

        // Sortiere die Zeilen nach dem Text in der ersten Spalte (Gildenname)
        rows.sort((a, b) => {
            const nameA = a.querySelector('td:first-child a').textContent.trim().toLowerCase();
            const nameB = b.querySelector('td:first-child a').textContent.trim().toLowerCase();
            return nameA.localeCompare(nameB);  // Alphabetische Sortierung
        });

        // Lösche den aktuellen Tabelleninhalt
        const tbody = table.querySelector('tbody');
        tbody.innerHTML = '';

        // Füge die Kopfzeile und die sortierten Zeilen wieder ein
        tbody.appendChild(headerRow);
        rows.forEach(row => tbody.appendChild(row));
    }

    // Wenn die Seite geladen ist, sortiere die Tabelle
    window.addEventListener('load', sortGuildTable);
})();
